<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Wallet | StuHustle</title>

  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/wallet.css">
</head>

<body class="dashboard-body">

<header class="topbar">
  <div class="top-left">
    <button id="menuBtn" class="menu-btn">â˜°</button>
    <h2 class="logo-text">Stu<span>Hustle</span></h2>
  </div>
</header>

<nav id="sidebar" class="sidebar">
  <a href="dashboard.html" class="nav-item">ğŸ  Dashboard</a>
  <a href="wallet.html" class="nav-item active">ğŸ’° Wallet</a>
  <a href="profile.html" class="nav-item">ğŸ‘¤ Profile</a>
  <a href="settings.html" class="nav-item">âš™ï¸ Settings</a>
</nav>

<div id="overlay"></div>

<main class="dashboard-content">

  <h1>Wallet</h1>
  <p class="sub-text">Manage your withdrawals securely</p>

  <!-- EMAIL VERIFICATION -->
  <div id="verifyBox" class="verify-box" style="display:none;">
    <p>âš ï¸ Verify your email to withdraw funds</p>
    <button id="resendVerify" class="btn-outline">Resend Email</button>
  </div>

  <!-- BALANCE -->
  <section class="wallet-cards">
    <div class="wallet-card">
      <h3>Available Balance</h3>
      <p id="availableBalance">$0.00</p>
    </div>
  </section>

  <!-- ACTION -->
  <section class="wallet-actions">
    <button id="openWithdraw" class="btn-primary">Withdraw</button>
  </section>

  <!-- REVIEW -->
  <div id="withdrawReview" class="withdraw-review" style="display:none;">
    <h3>Review Withdrawal</h3>

    <div class="review-item"><span>Method</span><strong id="rMethod"></strong></div>
    <div class="review-item"><span>Amount</span><strong id="rAmount"></strong></div>
    <div class="review-item"><span>Fee</span><strong id="rFee"></strong></div>
    <div class="review-item"><span>You Receive</span><strong id="rReceive"></strong></div>

    <div id="rExtra"></div>

    <button id="submitWithdrawal" class="btn-primary full-btn">
      Submit Withdrawal
    </button>

    <p id="pendingText" class="queue-text" style="display:none;">
      â³ Withdrawal pending (up to 24 hours)
    </p>
  </div>

</main>

<!-- MODAL -->
<div id="withdrawModal" class="modal">
  <div class="modal-content">
    <h3>Withdraw Funds</h3>

    <div class="method-toggle">
      <button class="method-btn active" data-method="paypal">PayPal</button>
      <button class="method-btn" data-method="mpesa">M-Pesa</button>
    </div>

    <!-- PAYPAL -->
    <div id="paypalForm" class="withdraw-form">
      <input type="email" id="paypalEmail" placeholder="PayPal Email">
      <input type="number" id="paypalAmount" placeholder="Amount (USD)">
    </div>

    <!-- MPESA -->
    <div id="mpesaForm" class="withdraw-form" style="display:none;">
      <p id="mpesaNotice" class="error-text" style="display:none;">
        M-Pesa is only available for Kenyan users ğŸ‡°ğŸ‡ª
      </p>
      <input type="text" id="mpesaName" placeholder="M-Pesa Registered Name">
      <input type="text" id="mpesaPhone" placeholder="M-Pesa Phone (2547...)">
      <input type="number" id="mpesaAmount" placeholder="Amount (USD)">
    </div>

    <p class="fee-text">Fee: <span id="feePreview">$0.00</span></p>
    <p class="fee-text" id="kesPreview" style="display:none;"></p>

    <p id="withdrawError" class="error-text"></p>

    <button id="confirmWithdraw" class="btn-primary">Confirm Details</button>
    <button id="closeWithdraw" class="btn-outline">Cancel</button>
  </div>
</div>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="js/firebaseConfig.js"></script>
<script src="js/wallet.js"></script>

</body>
</html>
